<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Server - soundworks</title>
    
    <meta name="description" content="Documentation of soundworks, a full-stack JavaScript framework for distributed WebAudio and multimedia applications" />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="http://soundworks.dev/" target="_blank" class="menu-item" >General Documentation</a></h2><h2><a href="https://github.com/collective-soundworks/soundworks" target="_blank" class="menu-item" >Github</a></h2><h3>Namespaces</h3><ul><li><a href="client.html">client</a></li><li><a href="server.html">server</a></li></ul><h3>Classes</h3><ul><li><a href="client.Client.html">client.Client</a><ul class='methods'><li data-type='method'><a href="client.Client.html#getAuditState">getAuditState</a></li><li data-type='method'><a href="client.Client.html#init">init</a></li><li data-type='method'><a href="client.Client.html#onStatusChange">onStatusChange</a></li><li data-type='method'><a href="client.Client.html#start">start</a></li><li data-type='method'><a href="client.Client.html#stop">stop</a></li></ul></li><li><a href="client.Context.html">client.Context</a><ul class='methods'><li data-type='method'><a href="client.Context.html#enter">enter</a></li><li data-type='method'><a href="client.Context.html#exit">exit</a></li><li data-type='method'><a href="client.Context.html#start">start</a></li><li data-type='method'><a href="client.Context.html#stop">stop</a></li></ul></li><li><a href="client.ContextManager.html">client.ContextManager</a><ul class='methods'><li data-type='method'><a href="client.ContextManager.html#get">get</a></li></ul></li><li><a href="client.Plugin.html">client.Plugin</a><ul class='methods'><li data-type='method'><a href="client.Plugin.html#onStateChange">onStateChange</a></li><li data-type='method'><a href="client.Plugin.html#propagateStateChange">propagateStateChange</a></li><li data-type='method'><a href="client.Plugin.html#start">start</a></li><li data-type='method'><a href="client.Plugin.html#stop">stop</a></li></ul></li><li><a href="client.PluginManager.html">client.PluginManager</a><ul class='methods'><li data-type='method'><a href="client.PluginManager.html#getRegisteredPlugins">getRegisteredPlugins</a></li><li data-type='method'><a href="client.PluginManager.html#onStateChange">onStateChange</a></li><li data-type='method'><a href="client.PluginManager.html#register">register</a></li></ul></li><li><a href="client.SharedState.html">client.SharedState</a><ul class='methods'><li data-type='method'><a href="client.SharedState.html#delete">delete</a></li><li data-type='method'><a href="client.SharedState.html#detach">detach</a></li><li data-type='method'><a href="client.SharedState.html#get">get</a></li><li data-type='method'><a href="client.SharedState.html#getDefaults">getDefaults</a></li><li data-type='method'><a href="client.SharedState.html#getInitValues">getInitValues</a></li><li data-type='method'><a href="client.SharedState.html#getSchema">getSchema</a></li><li data-type='method'><a href="client.SharedState.html#getValues">getValues</a></li><li data-type='method'><a href="client.SharedState.html#onDelete">onDelete</a></li><li data-type='method'><a href="client.SharedState.html#onDetach">onDetach</a></li><li data-type='method'><a href="client.SharedState.html#onUpdate">onUpdate</a></li><li data-type='method'><a href="client.SharedState.html#set">set</a></li></ul></li><li><a href="client.Socket.html">client.Socket</a><ul class='methods'><li data-type='method'><a href="client.Socket.html#addBinaryListener">addBinaryListener</a></li><li data-type='method'><a href="client.Socket.html#addListener">addListener</a></li><li data-type='method'><a href="client.Socket.html#removeAllBinaryListeners">removeAllBinaryListeners</a></li><li data-type='method'><a href="client.Socket.html#removeAllListeners">removeAllListeners</a></li><li data-type='method'><a href="client.Socket.html#removeBinaryListener">removeBinaryListener</a></li><li data-type='method'><a href="client.Socket.html#removeListener">removeListener</a></li><li data-type='method'><a href="client.Socket.html#send">send</a></li><li data-type='method'><a href="client.Socket.html#sendBinary">sendBinary</a></li></ul></li><li><a href="client.StateManager.html">client.StateManager</a><ul class='methods'><li data-type='method'><a href="client.StateManager.html#attach">attach</a></li><li data-type='method'><a href="client.StateManager.html#create">create</a></li><li data-type='method'><a href="client.StateManager.html#observe">observe</a></li></ul></li><li><a href="server.Client.html">server.Client</a></li><li><a href="server.Context.html">server.Context</a><ul class='methods'><li data-type='method'><a href="server.Context.html#enter">enter</a></li><li data-type='method'><a href="server.Context.html#exit">exit</a></li><li data-type='method'><a href="server.Context.html#start">start</a></li><li data-type='method'><a href="server.Context.html#stop">stop</a></li></ul></li><li><a href="server.ContextManager.html">server.ContextManager</a><ul class='methods'><li data-type='method'><a href="server.ContextManager.html#get">get</a></li></ul></li><li><a href="server.Plugin.html">server.Plugin</a><ul class='methods'><li data-type='method'><a href="server.Plugin.html#addClient">addClient</a></li><li data-type='method'><a href="server.Plugin.html#onStateChange">onStateChange</a></li><li data-type='method'><a href="server.Plugin.html#propagateStateChange">propagateStateChange</a></li><li data-type='method'><a href="server.Plugin.html#removeClient">removeClient</a></li><li data-type='method'><a href="server.Plugin.html#start">start</a></li><li data-type='method'><a href="server.Plugin.html#stop">stop</a></li></ul></li><li><a href="server.PluginManager.html">server.PluginManager</a><ul class='methods'><li data-type='method'><a href="server.PluginManager.html#checkRegisteredPlugins">checkRegisteredPlugins</a></li><li data-type='method'><a href="server.PluginManager.html#getRegisteredPlugins">getRegisteredPlugins</a></li><li data-type='method'><a href="server.PluginManager.html#onStateChange">onStateChange</a></li><li data-type='method'><a href="server.PluginManager.html#register">register</a></li></ul></li><li><a href="server.Server.html">server.Server</a><ul class='methods'><li data-type='method'><a href="server.Server.html#getAuditState">getAuditState</a></li><li data-type='method'><a href="server.Server.html#init">init</a></li><li data-type='method'><a href="server.Server.html#setCustomApplicationTemplateOptions">setCustomApplicationTemplateOptions</a></li><li data-type='method'><a href="server.Server.html#start">start</a></li><li data-type='method'><a href="server.Server.html#stop">stop</a></li><li data-type='method'><a href="server.Server.html#useDefaultApplicationTemplate">useDefaultApplicationTemplate</a></li></ul></li><li><a href="server.SharedState.html">server.SharedState</a><ul class='methods'><li data-type='method'><a href="server.SharedState.html#delete">delete</a></li><li data-type='method'><a href="server.SharedState.html#detach">detach</a></li><li data-type='method'><a href="server.SharedState.html#get">get</a></li><li data-type='method'><a href="server.SharedState.html#getDefaults">getDefaults</a></li><li data-type='method'><a href="server.SharedState.html#getInitValues">getInitValues</a></li><li data-type='method'><a href="server.SharedState.html#getSchema">getSchema</a></li><li data-type='method'><a href="server.SharedState.html#getValues">getValues</a></li><li data-type='method'><a href="server.SharedState.html#onDelete">onDelete</a></li><li data-type='method'><a href="server.SharedState.html#onDetach">onDetach</a></li><li data-type='method'><a href="server.SharedState.html#onUpdate">onUpdate</a></li><li data-type='method'><a href="server.SharedState.html#set">set</a></li></ul></li><li><a href="server.Socket.html">server.Socket</a><ul class='methods'><li data-type='method'><a href="server.Socket.html#addBinaryListener">addBinaryListener</a></li><li data-type='method'><a href="server.Socket.html#addListener">addListener</a></li><li data-type='method'><a href="server.Socket.html#addToRoom">addToRoom</a></li><li data-type='method'><a href="server.Socket.html#removeAllBinaryListeners">removeAllBinaryListeners</a></li><li data-type='method'><a href="server.Socket.html#removeAllListeners">removeAllListeners</a></li><li data-type='method'><a href="server.Socket.html#removeBinaryListener">removeBinaryListener</a></li><li data-type='method'><a href="server.Socket.html#removeFromRoom">removeFromRoom</a></li><li data-type='method'><a href="server.Socket.html#removeListener">removeListener</a></li><li data-type='method'><a href="server.Socket.html#send">send</a></li><li data-type='method'><a href="server.Socket.html#sendBinary">sendBinary</a></li></ul></li><li><a href="server.Sockets.html">server.Sockets</a><ul class='methods'><li data-type='method'><a href="server.Sockets.html#addToRoom">addToRoom</a></li><li data-type='method'><a href="server.Sockets.html#broadcast">broadcast</a></li><li data-type='method'><a href="server.Sockets.html#broadcastBinary">broadcastBinary</a></li><li data-type='method'><a href="server.Sockets.html#removeFromRoom">removeFromRoom</a></li></ul></li><li><a href="server.StateManager.html">server.StateManager</a><ul class='methods'><li data-type='method'><a href="server.StateManager.html#attach">attach</a></li><li data-type='method'><a href="server.StateManager.html#create">create</a></li><li data-type='method'><a href="server.StateManager.html#deleteSchema">deleteSchema</a></li><li data-type='method'><a href="server.StateManager.html#observe">observe</a></li><li data-type='method'><a href="server.StateManager.html#registerSchema">registerSchema</a></li><li data-type='method'><a href="server.StateManager.html#registerUpdateHook">registerUpdateHook</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Server</h1>
    

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="server.html">server</a>.</span>
        
        Server
        </h2>
        
            <div class="class-description usertext"><p>The <code>Server</code> class is the main entry point for the server-side of a soundworks
application.</p>
<p>The <code>Server</code> instance allows to access soundworks components such as <a href="server.StateManager.html">server.StateManager</a>,
<a href="server.PluginManager.html">server.PluginManager</a>,<a href="server.Socket.html">server.Socket</a> or <a href="server.ContextManager.html">server.ContextManager</a>.
Its is also responsible for handling the initialization lifecycles of the different
soundworks components.</p>
<pre class="prettyprint source"><code>import { Server } from '@soundworks/core/server';

const server = new Server({
  app: {
    name: 'my-example-app',
    clients: {
      player: { target: 'browser', default: true },
      controller: { target: 'browser' },
      thing: { target: 'node' }
    },
  },
  env: {
    port: 8000,
  },
});

await server.start();
</code></pre>
<p>According to the clients definitions provided in <code>config.app.clients</code>, the
server will automatically create a dedicated route for each browser client role.
For example, given the config object of the example above that defines two
different client roles for browser targets (i.e. <code>player</code> and <code>controller</code>):</p>
<pre class="prettyprint source"><code>config.app.clients = {
  player: { target: 'browser', default: true },
  controller: { target: 'browser' },
}
</code></pre>
<p>The server will listen to the following URLs:</p>
<ul>
<li><code>http://127.0.0.1:8000/</code> for the <code>player</code> role, which is defined as the default client.</li>
<li><code>http://127.0.0.1:8000/controller</code> for the <code>controller</code> role.</li>
</ul></div>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="Server"><span class="type-signature"></span>new Server<span class="signature">(config)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line144">line 144</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="server.html#.ServerConfig">server.ServerConfig</a></span>


            
            </td>

            

            

            <td class="description last"><p>Configuration object for the server.</p></td>
        </tr>

    
    </tbody>
</table>














<h5>Throws:</h5>

        

    <div class="param-desc usertext">
    
        <ul>
<li>If <code>config.app.clients</code> is empty.</li>
<li>If a <code>node</code> client is defined but <code>config.env.serverAddress</code> is not defined.</li>
<li>if <code>config.env.useHttps</code> is <code>true</code> and <code>config.env.httpsInfos</code> is not <code>null</code>
(which generates self signed certificated), <code>config.env.httpsInfos.cert</code> and
<code>config.env.httpsInfos.key</code> should point to valid cert files.</li>
</ul>
    
    </div>


    





        
        </div>
    

    

    

    
    
    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="config"><span class="type-signature"></span>config<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line183">line 183</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Given config object merged with the following defaults:</p>
<pre class="prettyprint source"><code>{
  env: {
    type: 'development',
    port: 8000,
    serverAddress: null,
    subpath: '',
    websockets: {
      path: 'socket',
      pingInterval: 5000,
    },
    useHttps: false,
    httpsInfos: null,
    crossOriginIsolated: true,
    verbose: true,
  },
  app: {
    name: 'soundworks',
    clients: {},
  }
}
</code></pre>
</div>








        
            
<h4 class="name" id="contextManager"><span class="type-signature"></span>contextManager<span class="type-signature"> :<a href="server.ContextManager.html">server.ContextManager</a></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line281">line 281</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="server.ContextManager.html">server.ContextManager</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <p>Instance of the <a href="server.ContextManager.html">server.ContextManager</a> class.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="server.ContextManager.html">server.ContextManager</a></span>


        </li>
    </ul>






        
            
<h4 class="name" id="httpServer"><span class="type-signature"></span>httpServer<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line249">line 249</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://nodejs.org/api/http.html">https://nodejs.org/api/http.html</a></li>
        
            <li><a href="https://nodejs.org/api/https.html">https://nodejs.org/api/https.html</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <p>Raw Node.js <code>http</code> or <code>https</code> instance</p>
</div>








        
            
<h4 class="name" id="httpsInfos"><span class="type-signature"></span>httpsInfos<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line287">line 287</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>If <code>https</code> is required, hold informations about the certificates, e.g. if
self-signed, the dates of validity of the certificates, etc.</p>
</div>








        
            
<h4 class="name" id="pluginManager"><span class="type-signature"></span>pluginManager<span class="type-signature"> :<a href="server.PluginManager.html">server.PluginManager</a></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line265">line 265</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="server.PluginManager.html">server.PluginManager</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <p>Instance of the <a href="server.PluginManager.html">server.PluginManager</a> class.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="server.PluginManager.html">server.PluginManager</a></span>


        </li>
    </ul>






        
            
<h4 class="name" id="router"><span class="type-signature"></span>router<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line239">line 239</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://github.com/expressjs/express">https://github.com/expressjs/express</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <p>Instance of the express router.</p>
<p>The router can be used to open new route, for example to expose a directory
of static assets (in default soundworks applications only the <code>public</code> is exposed).</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>import { Server } from '@soundworks/core/server.js';
import express from 'express';

// create the soundworks server instance
const server = new Server(config);

// expose assets located in the `soundfiles` directory on the network
server.router.use('/soundfiles', express.static('soundfiles')));</code></pre>



        
            
<h4 class="name" id="sockets"><span class="type-signature"></span>sockets<span class="type-signature"> :<a href="server.Sockets.html">server.Sockets</a></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line257">line 257</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="server.Sockets.html">server.Sockets</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <p>Instance of the <a href="server.Sockets.html">server.Sockets</a> class.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="server.Sockets.html">server.Sockets</a></span>


        </li>
    </ul>






        
            
<h4 class="name" id="stateManager"><span class="type-signature"></span>stateManager<span class="type-signature"> :<a href="server.StateManager.html">server.StateManager</a></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line273">line 273</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="server.StateManager.html">server.StateManager</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <p>Instance of the <a href="server.StateManager.html">server.StateManager</a> class.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="server.StateManager.html">server.StateManager</a></span>


        </li>
    </ul>






        
            
<h4 class="name" id="status"><span class="type-signature"></span>status<span class="type-signature"> :string</span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line294">line 294</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Status of the server, 'idle', 'inited', 'started' or 'errored'.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="getAuditState"><span class="type-signature">(async) </span>getAuditState<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="server.SharedState.html">server.SharedState</a>>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line956">line 956</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="server.SharedState.html">server.SharedState</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <p>Attach and retrieve the global audit state of the application.</p>
<p>The audit state is a <a href="server.SharedState.html">server.SharedState</a> instance that keeps track of
global informations about the application such as, the number of connected
clients, network latency estimation, etc.</p>
<p>The audit state is created by the server on start up.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const auditState = await server.getAuditState();
auditState.onUpdate(() => console.log(auditState.getValues()), true);</code></pre>
















<h5>Throws:</h5>

        

    <div class="param-desc usertext">
    
        <p>Will throw if called before <code>server.init()</code></p>
    
    </div>


    


<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="server.SharedState.html">server.SharedState</a>></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="init"><span class="type-signature">(async) </span>init<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line349">line 349</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>The <code>init</code> method is part of the initialization lifecycle of the <code>soundworks</code>
server. Most of the time, the <code>init</code> method will be implicitly called by the
<a href="server.Server.html#start">server.Server#start</a> method.</p>
<p>In some situations you might want to call this method manually, in such cases
the method should be called before the <a href="server.Server.html#start">server.Server#start</a> method.</p>
<p>What it does:</p>
<ul>
<li>create the audit state</li>
<li>prepapre http(s) server and routing according to the informations
declared in <code>config.app.clients</code></li>
<li>initialize all registered plugins</li>
</ul>
<p>After <code>await server.init()</code> is fulfilled, the <a href="server.Server.html#stateManager">server.Server#stateManager</a>
and all registered plugins can be safely used.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const server = new Server(config);
await server.init();
await server.start();
// or implicitly called by start
const server = new Server(config);
await server.start(); // init is called implicitely</code></pre>





















        
            

    

    <h4 class="name" id="setCustomApplicationTemplateOptions"><span class="type-signature"></span>setCustomApplicationTemplateOptions<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line936">line 936</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Define custom template path, template engine, and clientConfig function.
This method is proposed for very advanced use-cases and should very probably
be improved. If you consider using this for some reason, please get in touch
first to explain your use-case :)</p>
</div>




























        
            

    

    <h4 class="name" id="start"><span class="type-signature">(async) </span>start<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line570">line 570</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>The <code>start</code> method is part of the initialization lifecycle of the <code>soundworks</code>
server. The <code>start</code> method will implicitly call the <a href="server.Server.html#init">server.Server#init</a>
method if it has not been called manually.</p>
<p>What it does:</p>
<ul>
<li>implicitely call <a href="server.Server.html#init">server.Server#init</a> if not done manually</li>
<li>launch the HTTP and WebSocket servers</li>
<li>start all created contexts. To this end, you will have to call <code>server.init</code>
manually and instantiate the contexts between <code>server.init()</code> and <code>server.start()</code></li>
</ul>
<p>After <code>await server.start()</code> the server is ready to accept incoming connections</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>import { Server } from '@soundworks/core/server.js'

const server = new Server(config);
await server.start();</code></pre>





















        
            

    

    <h4 class="name" id="stop"><span class="type-signature">(async) </span>stop<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line673">line 673</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Stops all started contexts, plugins, close all the socket connections and
the http(s) server.</p>
<p>In most situations, you might not need to call this method. However, it can
be usefull for unit testing or similar situations where you want to create
and delete several servers in the same process.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>import { Server } from '@soundworks/core/server.js'

const server = new Server(config);
await server.start();

await new Promise(resolve => setTimeout(resolve, 1000));
await server.stop();</code></pre>





















        
            

    

    <h4 class="name" id="useDefaultApplicationTemplate"><span class="type-signature"></span>useDefaultApplicationTemplate<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_Server.js.html">server/Server.js</a>, <a href="server_Server.js.html#line906">line 906</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Configure the server to work <em>out-of-the-box</em> within the soundworks application
template provided by `@soundworks/create.</p>
<ul>
<li>uses <a href="https://www.npmjs.com/package/template-literal">template-literal</a> package
as html templateEngine</li>
<li>define <code>.build/server/tmpl</code> as the directory in which html template can be
found</li>
<li>define the <code>clientConfigFunction</code> function that return client compliant
config object to be injected in the html template.</li>
</ul>
<p>Also expose two public directory:</p>
<ul>
<li>the <code>public</code> directory which is exposed behind the root path</li>
<li>the <code>./.build/public</code> directory which is exposed behind the <code>build</code> path</li>
</ul>
<p><em>Note: except in very rare cases (so rare that they are quite difficult to imagine),
you should rely on these defaults.</em></p>
</div>




























        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on Wed Jan 04 2023 10:33:47 GMT+0100 (Central European Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



    <link type="text/css" rel="stylesheet" href="assets/custom.css">
    
</body>
</html>